(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{6723:function(e,t,n){Promise.resolve().then(n.t.bind(n,4671,23)),Promise.resolve().then(n.t.bind(n,3054,23)),Promise.resolve().then(n.bind(n,1270))},1270:function(e,t,n){"use strict";n.d(t,{AuthProvider:function(){return d},a:function(){return c}});var a=n(7437),l=n(2265),i=n(303),r=n(9842),u=n(9506);let s=(0,l.createContext)(void 0);async function o(e){var t,n,a,l,i,s,o,d;let c=(0,r.JU)(u.db,"users",e.uid),f=await (0,r.QT)(c);if(f.exists()){let u=f.data();return await (0,r.pl)(c,{email:null!==(n=null!==(t=e.email)&&void 0!==t?t:u.email)&&void 0!==n?n:"",displayName:null!==(l=null!==(a=e.displayName)&&void 0!==a?a:u.displayName)&&void 0!==l?l:null,photoURL:null!==(s=null!==(i=e.photoURL)&&void 0!==i?i:u.photoURL)&&void 0!==s?s:null,lastLogin:(0,r.Bt)()},{merge:!0}),(await (0,r.QT)(c)).data()}let p={uid:e.uid,email:e.email||"",displayName:null!==(o=e.displayName)&&void 0!==o?o:null,photoURL:null!==(d=e.photoURL)&&void 0!==d?d:null,bio:"",location:"",subscriptionStatus:"free",tripsCreatedCount:0};return await (0,r.pl)(c,{...p,createdAt:(0,r.Bt)(),lastLogin:(0,r.Bt)()}),p}function d(e){let{children:t}=e,[n,d]=(0,l.useState)(null),[c,f]=(0,l.useState)(null),[p,y]=(0,l.useState)(!0);(0,l.useEffect)(()=>(0,i.Aj)(u.I,async e=>{if(!e){d(null),f(null),y(!1);return}d(e);try{let t=await o(e);f(t)}finally{y(!1)}}),[]);let v=async(e,t)=>{y(!0);try{let n=await (0,i.e5)(u.I,e,t),a=await o(n.user);d(n.user),f(a)}finally{y(!1)}},m=async(e,t)=>{y(!0);try{let n=await (0,i.Xb)(u.I,e,t),a=await o(n.user);d(n.user),f(a)}finally{y(!1)}},h=async()=>{y(!0);try{let e=new i.hJ,t=await (0,i.rh)(u.I,e),n=await o(t.user);d(t.user),f(n)}finally{y(!1)}},w=async()=>{y(!0);try{await (0,i.w7)(u.I),d(null),f(null)}finally{y(!1)}},b=async e=>{if(!n)return;let t=(0,r.JU)(u.db,"users",n.uid);await (0,r.pl)(t,e,{merge:!0}),f(t=>t?{...t,...e}:t)};return(0,a.jsx)(s.Provider,{value:{user:n,userData:c,loading:p,loginWithEmail:v,signupWithEmail:m,loginWithGoogle:h,logout:w,updateUserProfile:b},children:t})}function c(){let e=(0,l.useContext)(s);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},9506:function(e,t,n){"use strict";n.d(t,{I:function(){return u},db:function(){return s}});var a=n(5236),l=n(303),i=n(9842);let r=(0,a.C6)().length?(0,a.Mq)():(0,a.ZF)({apiKey:"AIzaSyCzDbT9T7fC21Jup0qpcsD6n6Lp0C4R9S0",authDomain:"travelgenie-dev.firebaseapp.com",projectId:"travelgenie-dev",storageBucket:"travelgenie-dev.firebasestorage.app",messagingSenderId:"121929930828",appId:"1:121929930828:web:231172b845cfa1473c7ce9"}),u=(0,l.v0)(r),s=(0,i.ad)(r)},3054:function(){},4671:function(e){e.exports={style:{fontFamily:"'__Inter_f367f3', '__Inter_Fallback_f367f3'",fontStyle:"normal"},className:"__className_f367f3"}}},function(e){e.O(0,[93,609,117,67,971,23,744],function(){return e(e.s=6723)}),_N_E=e.O()}]);